<!DOCTYPE html>
<html>
<head>
    <title>Student Learning Portal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <button id="home-btn" class="hidden" onclick="goHome()">HOME</button>

    <div id="menu-container">
        <div id="scr-login" class="screen active">
            <h1>PROJECT <span>A</span></h1>
            <input type="text" id="username" class="input-std" placeholder="USERNAME">
            <input type="password" id="password" class="input-std" placeholder="PASSWORD">
            <button class="btn btn-green" onclick="attemptLogin()">LOGIN / REGISTER</button>
        </div>

        <div id="scr-main" class="screen">
            <h1>PROJECT <span>A</span></h1>
            <div id="main-split">
                <div class="menu-left tech-panel">
                    <div class="user-info">Welcome, <span id="disp-user">Guest</span><br>Your Wins: <span id="disp-wins">0</span><br>Best APM: <span id="disp-apm">0</span></div>
                    <button class="btn btn-zen" onclick="startZen()">ZEN MODE</button>
                    <button class="btn btn-apm" onclick="startAPM()">APM TEST</button>
                    <button class="btn btn-ffa" onclick="joinFFA()">ONLINE FFA</button>
                    <button class="btn btn-mixtape" onclick="openPassive()">MUTATOR MADNESS</button>
                    <button class="btn btn-blue" onclick="openStats()">STATS / HISTORY</button>
                    <button class="btn" style="background:#222; color:#888; margin-top:20px;" onclick="logOut()">LOGOUT</button>
                </div>
                <div class="menu-right tech-panel">
                    <div class="lb-header-text">ONLINE WIN LEADERBOARD</div>
                    <div id="lb-wins" class="lb-list">Loading...</div>
                    <div class="lb-header-text">HIGHEST COMBO</div>
                    <div id="lb-combo" class="lb-list">Loading...</div>
                </div>
            </div>
        </div>

        <div id="scr-passive" class="screen">
            <h2 style="color: var(--accent);">MUTATOR MADNESS</h2>
            <div class="passive-info-box">
                <div id="p-title" class="p-title">EXTRA HOLD</div>
                <div id="p-desc" style="color:#ccc; font-size:14px; margin-bottom:10px;">Gain a second Hold inventory slot.</div>
                <div style="display:flex; justify-content:space-between;">
                    <div id="p-pro" class="p-pro">• 2 Inventory Slots</div><div id="p-con" class="p-con">• Delayed combos</div>
                </div>
            </div>
            <div class="passive-grid">
                <div class="passive-card selected">EXTRA HOLD</div>
                <div class="passive-card locked">SNIPER</div>
                <div class="passive-card locked">LOCKED</div>
                <div class="passive-card locked">LOCKED</div>
                <div class="passive-card locked">LOCKED</div>
                <div class="passive-card locked">LOCKED</div>
                <div class="passive-card locked">LOCKED</div>
                <div class="passive-card locked">LOCKED</div>
            </div>
            <button id="btn-conf" class="btn btn-mixtape" onclick="joinMadness()">CONFIRM LOADOUT</button>
            <button class="btn btn-gray" onclick="nav('scr-main')">BACK</button>
        </div>

        <div id="scr-stats" class="screen">
            <h2 style="color: var(--accent);">PLAYER STATISTICS</h2>
            <div id="stats-layout">
                <div id="stats-list"></div>
                <div id="stats-detail"><div style="text-align:center; color:#666; margin-top:100px;">Select a player</div></div>
            </div>
            <button class="btn" onclick="goHome()" style="margin-top:20px; background:#222; color:#fff;">BACK TO MENU</button>
        </div>

        <div id="scr-wait" class="screen">
            <h2 id="wait-msg">JOINING...</h2>
            <button class="btn btn-ffa" style="background:#333; color:#fff;" onclick="goHome()">CANCEL</button>
        </div>
    </div>

    <div id="ov-cnt" class="overlay hidden"><div id="cnt-txt">3</div></div>
    <div id="ov-res" class="overlay hidden">
        <h1 style="color: var(--accent);">RESULTS</h1>
        <table id="results-table">
            <thead><tr><th>#</th><th>PLAYER</th><th>SURVIVED</th><th>APM</th><th>PPS</th><th>SENT</th><th>RECV</th></tr></thead>
            <tbody id="res-body"></tbody>
        </table>
        <div class="sub-txt" style="margin-top:20px; font-size:16px; color:#888;">Next round in <span id="res-timer">5</span>s...</div>
    </div>
    
    <div id="kill-feed"></div>
    <button id="chat-open-btn" onclick="toggleChat()">CHAT</button>
    <div id="chat-container" class="hidden">
        <div id="chat-header"><button id="chat-close" onclick="toggleChat()">X</button></div>
        <div id="chat-history"></div>
        <input id="chat-input" placeholder="Chat..." onkeydown="sendChat(event)">
    </div>

    <div id="game-ui" class="game-area hidden">
        <div id="p1-root" class="player-root">
            <div class="stats-header">
                <div class="stat-box-top"><div class="stat-label">TIME</div><div id="s-time" class="stat-val">00:00</div></div>
                <div class="stat-box-top"><div class="stat-label">PPS</div><div id="s-pps" class="stat-val">0.00</div></div>
                <div class="stat-box-top"><div class="stat-label">APM</div><div id="s-apm" class="stat-val">0</div></div>
            </div>
            <div class="game-columns">
                <div class="col-left">
                    <div class="box-container"><div class="box-header">HOLD</div><canvas id="cvs-h" width="150" height="160"></canvas><div id="hold-ind"></div></div>
                    <div id="sniper-mag"></div><div id="mag-label" class="mag-label">AMMO</div>
                    <div style="flex:1"></div>
                    <div class="box-container box-stat-side"><div class="box-header">SENT</div><div id="s-sent" class="stat-val">0</div></div>
                    <div class="box-container box-stat-side"><div class="box-header">RECV</div><div id="s-recv" class="stat-val">0</div></div>
                </div>
                <div class="col-center">
                    <div class="garbage-container"><div id="g-bar" class="garbage-fill"></div></div>
                    <div class="main-board-wrap">
                        <canvas id="cvs-b" width="120" height="900"></canvas>
                        <div id="pop-action" class="float-text action-text">QUAD</div>
                        <div id="pop-combo" class="float-text combo-text">2 COMBO</div>
                        <div id="pop-b2b" class="float-text b2b-text">B2B</div>
                        <div id="pop-sent" class="float-text sent-text">+4</div>
                    </div>
                </div>
                <div class="col-right">
                    <div class="box-container"><div class="box-header">NEXT</div><canvas id="cvs-n" width="150" height="400"></canvas></div>
                </div>
            </div>
        </div>
        <div id="ffa-grid"></div> 
    </div>

    <script src="script.js"></script>
</body>
</html>
